{"declarations":[{"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Mathlib/Analysis/CStarAlgebra/ContinuousFunctionalCalculus/Note.html#LibraryNote.«continuous functional calculus»\"><span class=\"name\">LibraryNote</span>.<span class=\"name\">«continuous functional calculus»</span></a></span><span class=\"decl_args\"> :</span><div class=\"decl_type\"><a href=\"./Batteries/Util/LibraryNote.html#Batteries.Util.LibraryNote\">Batteries.Util.LibraryNote</a></div></div>","info":{"doc":"# The continuous functional calculus\n\nIn Mathlib, there are two classes --- `NonUnitalContinuousFunctionalCalculus` and\n`ContinuousFunctionalCalculus`, indexed by the scalar ring `R` and the predicate `p : A → Prop`\nwhich must be satisfied --- which are used to provide the interface to the continuous functional\ncalculus. This allows us to reason about the continuous functional calculus in both unital and\nnon-unital algebras, using functions, `ℂ → ℂ`, `ℝ → ℝ`, or `ℝ≥0 → ℝ≥0`, as appropriate.\n\nThese classes are designed to be used even in contexts where no norm is present, such as for\n`Matrix n n ℝ`, and indeed, an instance of `ContinuousFunctionalCalculus ℝ A IsSelfAdjoint` already\nexists in this context. However, when a norm is present (i.e., in the context of C⋆-algebras), the\ncontinuous functional calculus is an isometry. In order not to lose this information, we provide\ntwo additional classes `IsometricNonUnitalContinuousFunctionalCalculus` and\n`IsometricContinuousFunctionalCalculus`, extending the classes above. We encode this as a class\nfor two reasons:\n\n1. to provide a uniform interface for multiple scalar rings\n2. to allow for generalization to real C⋆-algebras\n\nThis means that there are twelve different classes, corresponding to the choices of scalar ring\n(`ℂ`, `ℝ`, or `ℝ≥0`), unital or non-unital algebras, isometric or not. The relationship between\nthese is documented in the diagram below, with arrows indicating always available instances.\nThe dotted arrow requires the presence of instances `PartialOrder A`, `StarOrderedRing A` and\n`NonnegSpectrumClass ℝ A`. Note that the instances which change scalar rings occur *within* each\nclass (i.e., `ContinuousFunctionalCalculus`, `IsometricContinuousFunctionalCalculus`, etc.), so a\nmore accurate diagram would have the chain on the left embedded within each node of the graph\non the right.\n\n```\n┌─────────┐     ┌──────────────────────┐\n│         │     │                      │\n│ Complex │     │   Isometric unital   ├──────────┐\n│         │     │                      │          │\n└────┬────┘     └───────────┬──────────┘          │\n     │                      │                     │\n     │                      │                     │\n     ▼                      ▼                     ▼\n┌─────────┐     ┌──────────────────────┐     ┌────────┐\n│         │     │                      │     │        │\n│   Real  │     │ Isometric non-unital │     │ Unital │\n│         │     │                      │     │        │\n└────┬────┘     └───────────┬──────────┘     └────┬───┘\n     :                      │                     │\n     :                      │                     │\n     ▼                      ▼                     │\n┌─────────┐     ┌──────────────────────┐          │\n│         │     │                      │          │\n│  NNReal │     │      Non-unital      │◄─────────┘\n│         │     │                      │\n└─────────┘     └──────────────────────┘\n```\n\n## Developing general theory\n\nWhen developing general theory of the continuous functional calculus, users should work in the\nappropriate general class. For example, the positive and negative parts of a selfadjoint element\nare defined using the continuous functional calculus via the functions `(·⁺ : ℝ → ℝ)` and\n`(·⁻ : ℝ → ℝ)`. These functions both take the value `0` at `0`, and so work equally well in the\nnon-unital setting. Moreover, the only scalar ring needed is `ℝ`, not `ℂ`. Therefore, the correct\ncontext in which to develop the basic theory of positive and negative parts is:\n\n```lean\nvariable {A : Type*} [NonUnitalRing A] [Module ℝ A] [SMulCommClass ℝ A A] [IsScalarTower ℝ A A]\n  [StarRing A] [TopologicalSpace A] [NonUnitalContinuousFunctionalCalculus ℝ A IsSelfAdjoint]\n```\n\nOne pattern that should *never* be used is to directly assume `ContinuousFunctionalCalculus`\n(or the non-unital version) over the scalar ring `ℝ≥0`. Doing so only complicates the setup, for\nno benefit. Indeed, in practice the only available instance of\n`ContinuousFunctionalCalculus ℝ≥0 A (0 ≤ ·)` is the one stemming from an instance over `ℝ`, along\nwith `NonnegSpectrumClass ℝ A`, `PartialOrder A`, `StarOrderedRing A`. Therefore, directly assuming\nthe `ℝ≥0` version makes Lean do more work in type class inference, and makes the structure of the\nsource code less readable. Instead, the correct pattern is to assume the version over `ℝ`, and then\nadd these extra three classes as needed to get the instance over `ℝ≥0`.\n\nThere are three questions that an author should ask themselves when developing general theory\nin order to determine the correct `variable`s to have in context. These are:\n\n1. Does this work for arbitrary scalar (semi)rings? Only `ℂ`, or is `ℝ` sufficient?\n\n  For arbitrary scalar rings, use `R` with a predicate `p : A → Prop`, and assume that `A` is an\n  `R`-algebra. For `ℂ` use `IsStarNormal` and assume `A` is a `ℂ`-algebra. For `ℝ` use\n  `IsSelfAdjoint` and assume `A` is an `ℝ`-algebra. Reminder, if you need the functional calculus\n  over `ℝ≥0`, simply use the `ℝ` setup with the three extra classes.\n\n2. Does this work in non-unital algebras?\n\n  This determines whether you should use the unital or `NonUnital` variation, and whether your\n  algebra should be unital or non-unital.\n\n3. Does this require norm properties of the algebra?\n\n  This determines whether you should use the standard version or the `Isometric` variation.\n  If you are not using the `Isometric` variation, you should generally only assume that `A` is a\n  `TopologicalSpace` (or potentially a topological algebra). If you are using the `Isometric`\n  variation, you should assume that `A` is a `NormedAlgebra` (in the unital case) or a `NormedSpace`\n  (in the non-unital case).\n\nOf course, sometimes one needs to have different sections which make different assumptions, even\nfor the same functions considered. For instance, although theory of positive and negative parts\nshould be developed in the maximum generality of non-unital `ℝ`-algebras without a norm, certain\nresults require stronger assumptions. A typical example is that there should be lemmas which\nsay `cfcₙ (·⁺ : ℝ → ℝ) (1 : A) = 1` and `cfcₙ (·⁻ : ℝ → ℝ) (1 : A) = 0`, but obviously these lemmas\nrequire `A` to be a unital algebra. For these results (which work over `ℝ`, only in unital algebras,\nand don't reference the norm), the correct context is (note the unital version of the functional\ncalculus despite the fact that the lemmas are about `cfcₙ`):\n\n```lean\nvariable {A : Type*} [Ring A] [Algebra ℝ A] [StarRing A] [TopologicalSpace A]\n  [ContinuousFunctionalCalculus ℝ A IsSelfAdjoint]\n```\n\nThe only context in which general theory should be developed with a `NonUnitalCStarAlgebra` or\n`CStarAlgebra` hypothesis is when the norm structure is required and the only scalar ring which\nworks is `ℂ`.\n\n## Uniqueness\n\nUnless you are developing theory over arbitrary scalar rings, it should never be necessary to\nassume `ContinuousMap.UniqueHom` or `ContinuousMapZero.UniqueHom`, despite the fact that these\nhypotheses are necessary for certain lemmas (in particular, `cfc_comp`). Over `ℝ` and `ℂ`, this\ninstance should always be available, and for `ℝ≥0`, one needs only to have the additional\nassumptions `T2Space A` and `IsTopologicalRing A` (as before, the algebra `A` should still be an\n`ℝ`-algebra).\n\n## Using `autoParam`\n\nMathlib makes heavy use of `autoParam`s in the continuous functional calculus. There are three\ndifferent tactics which are used:\n\n1. `cfc_tac` for proving goals of the form `IsStarNormal a`, `IsSelfAdjoint a` or `0 ≤ a`.\n2. `cfc_cont_tac` for proving goals of the form `ContinuousOn (spectrum R a) f`.\n3. `cfc_zero_tac` for proving goals of the form `f 0 = 0`.\n\nIn general, lemmas about the continuous functional calculus should be written using `autoParam`s\nwherever possible for these kinds of goals. These arguments should be placed *last*, at least among\nthe explicit arguments. Moreover, if the arguments `f` and `a` cannot be inferred from other\nexplicit arguments (i.e., those which are not `autoParam`s), then they should also be *explicit*\nrather than implicit, despite the fact that they appear in the types of the `autoParam` arguments.\nThe reason is that it is often necessary to supply these arguments in order for the `autoParam`\narguments to fire.\n\nAs to argument order, we generally prefer functions before elements of the algebra (i.e., `f` and\nthen `a`) to match the order of application (i.e., `cfc f a`). Likewise, we generally place the\n`autoParam`s for the continuity conditions before the others because these are the most likely to\nrequire manual intervention.\n\n## Location in Mathlib\n\nThe criterion for determining where to place files about general theory of functions pertaining to\nthe continuous functional calculus is whether the import\n`Mathlib/Analysis/CStarAlgebra/ContinuousFunctionalCalculus/Basic.lean` is needed, which contains\nthe instances of the continuous functional calculus for `CStarAlgebra`, and therefore pulls in many\nimports. If this import is not needed, then the file should be placed in the directory\n`Mathlib/Analysis/SpecialFunctions/ContinuousFunctionalCalculus.lean`. If this import is needed\nthen the appropriate location is `Mathlib/Analysis/CStarAlgebra/SpecialFunctions.lean`.\nIf, as is often thecase, some results need the import and others do not, there should be two files,\none in each location.\n","docLink":"./Mathlib/Analysis/CStarAlgebra/ContinuousFunctionalCalculus/Note.html#LibraryNote.«continuous functional calculus»","kind":"def","line":21,"name":"LibraryNote.«continuous functional calculus»","sourceLink":"https://github.com/leanprover-community/mathlib4/blob/32d24245c7a12ded17325299fd41d412022cd3fe/Mathlib/Analysis/CStarAlgebra/ContinuousFunctionalCalculus/Note.lean#L21-L180"}}],"imports":["Init","Mathlib.Init","Mathlib.Tactic.Basic"],"instances":[],"name":"Mathlib.Analysis.CStarAlgebra.ContinuousFunctionalCalculus.Note"}